<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rotam YKS — Demo</title>
<style>
  :root{
    --bg-gradient: linear-gradient(180deg, #fff8e6 0%, #fff4e0 40%, #fff0d9 100%);
    --accent-left: #FFD54A; /* sarı */
    --accent-right: #FF9800; /* turuncu */
    --card-bg: rgba(255,255,255,0.9);
    --muted: #666;
    --glass: rgba(255,255,255,0.6);
  }

  /* Reset */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: var(--bg-gradient);
    -webkit-font-smoothing:antialiased;
    color:#222;
    padding:24px;
  }

  /* Header */
  header{
    display:flex;
    align-items:center;
    gap:12px;
    position:sticky;
    top:16px;
    z-index:10;
    backdrop-filter: blur(6px);
    background: linear-gradient(90deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
    padding:8px 14px;
    border-radius:12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    width:fit-content;
  }
  .logo{
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:700;
    font-size:1.05rem;
  }
  .cap{
    width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;
    border-radius:8px;
    background: linear-gradient(90deg,var(--accent-left),var(--accent-right));
    box-shadow: 0 6px 12px rgba(255,152,0,0.18);
  }
  .cap svg{filter: drop-shadow(0 2px 6px rgba(0,0,0,0.12))}

  /* Layout */
  .container{
    display:grid;
    grid-template-columns: 360px 1fr;
    gap:20px;
    margin-top:18px;
  }
  @media (max-width:900px){
    .container{grid-template-columns:1fr}
    header{position:relative; width:100%}
  }

  /* Left panel (dersler + koşluk) */
  .panel{
    background: var(--card-bg);
    padding:16px;
    border-radius:14px;
    box-shadow: 0 8px 30px rgba(18,18,18,0.04);
  }
  h2{margin:0 0 8px 0;font-size:1rem}
  .subject{
    margin-bottom:12px;
  }

  /* Gradient button-like subject header */
  .subject-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:8px;
  }
  .accordion-btn{
    border:0;
    outline:0;
    padding:10px 14px;
    font-weight:600;
    border-radius:12px;
    cursor:pointer;
    background: linear-gradient(90deg,var(--accent-left),var(--accent-right));
    color: #2b1f00;
    box-shadow: 0 8px 20px rgba(255,152,0,0.12);
    transition: transform 180ms cubic-bezier(.2,.9,.3,1), box-shadow 180ms;
    transform-origin:center;
    display:flex;
    align-items:center;
    gap:10px;
    min-width:0;
  }
  .accordion-btn:hover{ transform: scale(1.04) }
  .accordion-btn:active{ transform: scale(0.96) }

  .accordion-icon{font-size:0.9rem;opacity:.95}

  /* Accordion content */
  .topics{
    margin-top:10px;
    max-height:0;
    overflow:hidden;
    transition: max-height 300ms ease, opacity 180ms ease;
    opacity:0;
  }
  .topics.open{
    opacity:1;
  }
  .topic{
    display:flex;
    gap:10px;
    align-items:center;
    padding:8px;
    border-radius:8px;
    transition: background 160ms;
  }
  .topic:hover{background:rgba(0,0,0,0.03)}
  .topic input[type="checkbox"]{width:18px;height:18px}

  /* Koşluk / progress */
  .progress-wrap{margin-top:16px}
  .progress-bar{
    background: linear-gradient(90deg,#f0f0f0,#fafafa);
    border-radius:12px;
    padding:8px;
  }
  .progress{
    height:18px;
    border-radius:10px;
    background: linear-gradient(90deg,var(--accent-left),var(--accent-right));
    width:0%;
    transition: width 400ms ease;
  }
  .progress-meta{display:flex;justify-content:space-between;font-size:.85rem;color:var(--muted);margin-top:8px}

  /* Right panel (notlar + motivasyon) */
  .main{
    display:flex;
    flex-direction:column;
    gap:18px;
  }

  .card{
    background: var(--card-bg);
    padding:18px;
    border-radius:14px;
    box-shadow: 0 10px 30px rgba(2,6,23,0.04);
  }

  /* Ders notları grid */
  .notes-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:12px;
  }
  .note{
    padding:12px;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.85));
    min-height:88px;
    display:flex;
    flex-direction:column;
    gap:8px;
  }
  .note h3{margin:0;font-size:0.95rem}
  .note p{margin:0;color:var(--muted);font-size:0.86rem}

  /* Motivasyon bölümü */
  .quote{
    padding:12px;
    border-radius:12px;
    min-height:68px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:600;
    font-size:1.05rem;
    text-align:center;
    background: linear-gradient(90deg, rgba(255,213,77,0.12), rgba(255,152,0,0.08));
  }

  /* Small utilities */
  .controls{display:flex;gap:8px;flex-wrap:wrap}
  .btn-ghost{
    border-radius:10px;padding:8px 10px;border:1px solid rgba(0,0,0,0.06);background:transparent;cursor:pointer;font-weight:600
  }
  .label-muted{font-size:0.85rem;color:var(--muted)}

  /* footer note */
  .small{font-size:0.82rem;color:var(--muted)}

  /* Icon button with gradient border */
  .grad-outline{
    padding:8px;border-radius:10px;border:2px solid transparent;background-image:linear-gradient(#fff,#fff), linear-gradient(90deg,var(--accent-left),var(--accent-right));
    background-origin: padding-box, border-box;
    background-clip: padding-box, border-box;
    cursor:pointer;
  }

  /* animation for newly checked */
  .flash{
    animation: flashAnim 900ms ease;
  }
  @keyframes flashAnim{
    0%{box-shadow:0 0 0 rgba(255,193,7,0.0)}
    30%{box-shadow:0 8px 20px rgba(255,193,7,0.18)}
    100%{box-shadow:0 0 0 rgba(255,193,7,0.0)}
  }
</style>
</head>
<body>

<header>
  <div class="logo">
    <div class="cap" aria-hidden="true">
      <!-- graduation cap svg -->
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L1 7l11 5 9-4.09V17h2V7L12 2z" fill="#fff"/>
        <path d="M11 13.17V21h2v-7.83l-1-.45-1 .45z" fill="#fff"/>
      </svg>
    </div>
    Rotam YKS
  </div>
</header>

<main class="container">
  <!-- LEFT -->
  <aside class="panel" aria-label="Dersler ve koşluk">
    <h2>Ders Takibi</h2>

    <!-- Subjects accordion -->
    <div id="subjects">
      <!-- JS will populate -->
    </div>

    <!-- Koşluk / progress -->
    <div class="progress-wrap">
      <div class="label-muted">Güncel Koşluk (Toplam Tamamlanan Konu)</div>
      <div class="progress-bar" role="progressbar" aria-label="Koşluk">
        <div id="mainProgress" class="progress"></div>
      </div>
      <div class="progress-meta">
        <div id="completedCount">0 tamamlandı</div>
        <div id="totalCount">0 toplam</div>
      </div>
    </div>

    <div style="margin-top:14px;display:flex;gap:8px;align-items:center;justify-content:space-between;">
      <div class="small">İlerleme otomatik kaydedilir</div>
      <button id="resetBtn" class="btn-ghost">Sıfırla</button>
    </div>
  </aside>

  <!-- RIGHT -->
  <section class="main">
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
        <div>
          <h2 style="margin:0 0 6px 0">Ders Notları</h2>
          <div class="label-muted">Konu kartlarına tıklayıp not ekleyebileceğin alan</div>
        </div>
        <div class="controls">
          <button id="exportBtn" class="grad-outline" title="Kaydet/İndir">Kaydet</button>
          <button id="importBtn" class="btn-ghost" title="Veri geri yükle">Geri Yükle</button>
        </div>
      </div>

      <div style="margin-top:12px" class="notes-grid" id="notesGrid">
        <!-- Example note cards -->
        <div class="note">
          <h3>TYT Türkçe</h3>
          <p>Bütün konuları takip et: Dil bilgisi, Paragraf, Anlam bilgisi...</p>
        </div>
        <div class="note">
          <h3>TYT Matematik</h3>
          <p>Temel konular ve günlük test planları ekle.</p>
        </div>
        <div class="note">
          <h3>TYT Fizik / Kimya / Biyoloji</h3>
          <p>Fen derslerini konuya göre düzenle.</p>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 style="margin:0 0 10px 0">Motivasyon</h2>
      <div class="quote" id="quoteBox">Çalışmaya hazır mısın? Başlayalım!</div>
    </div>

    <div class="card" style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
      <div>
        <h2 style="margin:0 0 6px 0">Hızlı Komutlar</h2>
        <div class="label-muted">Butonları dene: büyüyüp küçülme ve gradient efektleri aktif.</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center;">
        <button class="accordion-btn" id="demoBtn"><span>Demo Buton</span><span class="accordion-icon">▶</span></button>
        <button class="btn-ghost" id="shuffleQuote">Söz Değiştir</button>
      </div>
    </div>

  </section>
</main>

<script>
/*
  Rotam YKS — Single-file demo
  Özellikler:
  - Subjects (accordion) + topic checkboxes
  - Progress bar (koşluk), gradient
  - Motivasyon sözleri döndürücü
  - LocalStorage ile kayıt
  - Basit import/export (JSON)
*/

/* --- CONFIG: dersler ve konular --- */
const subjectsData = [
  {
    id: "tyt-turkce",
    title: "TYT Türkçe",
    topics: ["Paragraf", "Anlatım Bozuklukları", "Dil Bilgisi", "Okuma ve Yorumlama", "Cümle Bilgisi"]
  },
  {
    id: "tyt-mat",
    title: "TYT Matematik",
    topics: ["Sayılar", "Bölme ve Bölenler", "Denklik", "Problemler", "Fonksiyon Temelleri"]
  },
  {
    id: "tyt-fen",
    title: "TYT Fen",
    topics: ["Fizik Temel", "Kimya Temel", "Biyoloji Temel"]
  },
  {
    id: "tyt-sos",
    title: "TYT Sosyal",
    topics: ["Tarih", "Coğrafya", "Felsefe/İnkılap"]
  }
];

const quotes = [
  "Her küçük adım, büyük hedefe giden bir adımdır.",
  "Bugün yaptığın çalışma, yarının başarı altyapısıdır.",
  "Zorlandığın an ilerliyorsun demektir.",
  "Düzenli çalışma, yetenekten daha güçlüdür.",
  "Kendine inan, geri kalanını çalışman halleder."
];

/* --- helpers --- */
const $ = (s, root=document) => root.querySelector(s);
const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));

/* --- Local storage keys --- */
const STORAGE_KEY = "rotam_works_v1";

/* --- state --- */
let state = {
  completed: {}, // { subjectId: { topicIndex: true } }
};

/* --- init --- */
function loadState(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(raw) state = JSON.parse(raw);
  }catch(e){
    console.warn("State load error", e);
  }
}
function saveState(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

/* Build UI for subjects */
function renderSubjects(){
  const container = $("#subjects");
  container.innerHTML = "";
  subjectsData.forEach(sub => {
    const subWrap = document.createElement("div");
    subWrap.className = "subject";
    const header = document.createElement("div");
    header.className = "subject-header";

    const btn = document.createElement("button");
    btn.className = "accordion-btn";
    btn.innerHTML = `<span>${sub.title}</span> <span class="accordion-icon">▾</span>`;
    btn.setAttribute("aria-expanded","false");

    // topics container
    const topicsWrap = document.createElement("div");
    topicsWrap.className = "topics";
    topicsWrap.id = `topics-${sub.id}`;

    // fill topics
    sub.topics.forEach((t, idx) => {
      const tEl = document.createElement("label");
      tEl.className = "topic";
      tEl.innerHTML = `<input type="checkbox" data-sub="${sub.id}" data-idx="${idx}" /> <div style="flex:1"><strong style="display:block">${t}</strong><span class="small label-muted">Not eklemek için tıkla</span></div>`;
      topicsWrap.appendChild(tEl);
    });

    // toggle
    btn.addEventListener("click", () => {
      const open = topicsWrap.classList.toggle("open");
      document.querySelectorAll(".topics").forEach(n=>{ if(n !== topicsWrap){ n.classList.remove("open"); n.style.maxHeight = null; n.previousOpenBtn && (n.previousOpenBtn.setAttribute("aria-expanded","false")) }});
      if(open){
        topicsWrap.style.maxHeight = topicsWrap.scrollHeight + "px";
        btn.setAttribute("aria-expanded","true");
      } else {
        topicsWrap.style.maxHeight = null;
        btn.setAttribute("aria-expanded","false");
      }
    });

    header.appendChild(btn);
    subWrap.appendChild(header);
    subWrap.appendChild(topicsWrap);
    container.appendChild(subWrap);
  });

  // wire up checkboxes after inserted
  $$("#subjects input[type=checkbox]").forEach(cb => {
    const subId = cb.dataset.sub;
    const idx = cb.dataset.idx;
    // set from state
    cb.checked = !!(state.completed[subId] && state.completed[subId][idx]);
    cb.addEventListener("change", e => {
      toggleTopic(subId, idx, cb.checked, cb);
    });
  });

  // ensure any open topics have correct height
  $$(".topics").forEach(t => {
    if(t.classList.contains("open")) t.style.maxHeight = t.scrollHeight + "px";
  });

  updateProgressUI();
}

function toggleTopic(subId, idx, checked, element){
  // create map if absent
  if(!state.completed[subId]) state.completed[subId] = {};
  if(checked) state.completed[subId][idx] = true;
  else delete state.completed[subId][idx];

  // flash effect on label container:
  const label = element.closest(".topic");
  if(label){
    label.classList.add("flash");
    setTimeout(()=> label.classList.remove("flash"),900);
  }
  saveState();
  updateProgressUI();
}

/* progress calculation */
function calcProgress(){
  let total = 0, done = 0;
  subjectsData.forEach(sub=>{
    total += sub.topics.length;
    const map = state.completed[sub.id] || {};
    done += Object.keys(map).length;
  });
  return { total, done };
}
function updateProgressUI(){
  const {total, done} = calcProgress();
  const pct = total === 0 ? 0 : Math.round((done/total)*100);
  $("#mainProgress").style.width = pct + "%";
  $("#completedCount").textContent = done + " tamamlandı";
  $("#totalCount").textContent = total + " toplam";
}

/* Quotes rotating */
let quoteIndex = 0;
function showQuote(i){
  const el = $("#quoteBox");
  el.style.opacity = 0;
  setTimeout(()=> {
    el.textContent = quotes[i % quotes.length];
    el.style.opacity = 1;
  }, 220);
}
function startQuotesRotation(){
  showQuote(quoteIndex);
  setInterval(()=>{
    quoteIndex = (quoteIndex + 1) % quotes.length;
    showQuote(quoteIndex);
  }, 6000);
}

/* Export / Import */
function exportData(){
  const dataStr = JSON.stringify(state, null, 2);
  const blob = new Blob([dataStr], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url; a.download = "rotam-state.json";
  document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
}
function importData(){
  const inp = document.createElement("input");
  inp.type = "file"; inp.accept = ".json,application/json";
  inp.onchange = e => {
    const f = e.target.files[0];
    if(!f) return;
    const r = new FileReader();
    r.onload = evt => {
      try{
        const parsed = JSON.parse(evt.target.result);
        state = parsed;
        saveState();
        renderSubjects();
        alert("Veriler yüklendi.");
      }catch(err){
        alert("Dosya okunamadı veya format hatalı.");
      }
    };
    r.readAsText(f);
  };
  inp.click();
}

/* Reset */
function resetAll(){
  if(!confirm("Tüm ilerlemeyi sıfırlamak istediğine emin misin?")) return;
  state = { completed: {} };
  saveState();
  renderSubjects();
}

/* LocalStorage quick load on start */
loadState();
renderSubjects();

/* UI events */
$("#resetBtn").addEventListener("click", resetAll);
$("#exportBtn").addEventListener("click", exportData);
$("#importBtn").addEventListener("click", importData);

/* demo button animation / icon rotate */
$("#demoBtn").addEventListener("click", ()=>{
  const icon = $("#demoBtn .accordion-icon");
  icon.style.transform = "rotate(90deg)";
  setTimeout(()=> icon.style.transform = "", 600);
});

/* shuffle quote button */
$("#shuffleQuote").addEventListener("click", ()=>{
  quoteIndex = Math.floor(Math.random()*quotes.length);
  showQuote(quoteIndex);
});

/* init quotes */
startQuotesRotation();

/* Restore checkbox event listeners after dynamic changes */
document.addEventListener("click", (e)=>{
  if(e.target.matches(".topic") || e.target.closest(".topic")){
    const topic = e.target.closest(".topic");
    const cb = topic.querySelector('input[type="checkbox"]');
    if(cb){
      cb.checked = !cb.checked;
      cb.dispatchEvent(new Event('change'));
    }
  }
});

/* accessibility: allow keyboard expand/collapse of accordions */
document.addEventListener("keydown", (e)=>{
  if(e.key === "Enter" || e.key === " "){
    const active = document.activeElement;
    if(active && active.classList.contains("accordion-btn")){
      active.click();
      e.preventDefault();
    }
  }
});

/* initial progress UI update */
updateProgressUI();

/* Handy: save state when window unloads */
window.addEventListener("beforeunload", saveState);
</script>

</body>
</html>
